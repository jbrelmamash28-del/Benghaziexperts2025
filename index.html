<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>نافذة رفع بيانات لغرض الشكوى</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
<style>
html { font-size: 125%; }
* { box-sizing: border-box; }
body {
  font-family: "Cairo", sans-serif;
  background: linear-gradient(180deg, #17191c 0%, #0e0f10 100%);
  color: #e6e6e6;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

header {
  text-align: center;
  padding: 31px 12.5px;
  background: #1a1d21;
  box-shadow: 0 2px 8px rgba(0,0,0,0.6);
  position: relative;
}

/* Flex container للشعار والدوائر */
.header-flex {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  flex-wrap: wrap;
  gap: 200px; /* المسافة بين الشعار والدوائر */
}

header .logo-wrapper {
  width: 250px;
  height: 250px;
  border-radius: 50%;
  overflow: hidden;
  border: 5px solid #2d9f59;
  box-shadow: 0 0 31px rgba(45,159,89,0.4);
  animation: pulse 5s infinite ease-in-out;
}
header img { width: 100%; height: 100%; object-fit: cover; }

header h2 {
  color: #8fe388;
  font-size: 27.5px;
  margin-top: 18.75px;
  animation: softPulse 3s infinite ease-in-out;
}
header h1 {
  color: #ffffff;
  font-size: 30px;
  margin-top: 6.25px;
}

/* دوائر الإحصائيات */
.stats-circle {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: clamp(150px, 22vw, 180px);
  height: clamp(150px, 22vw, 180px);
  border-radius: 50%;
  opacity: 0;
  transform: scale(0.7);
  transition: all 0.6s ease;
  animation: pulseCircle 2s infinite ease-in-out;
}
.stats-circle.show {
  opacity: 1;
  transform: scale(1);
}
.red-circle {
  background: radial-gradient(circle at 30% 30%, #ff6b6b, #c0392b);
  color: #fff;
  border: 3px solid #c0392b;
  box-shadow: 0 0 15px rgba(255,0,0,0.4);
}
.green-circle {
  background: radial-gradient(circle at 30% 30%, #36d07a, #27ae60);
  color: #fff;
  border: 3px solid #27ae60;
  box-shadow: 0 0 15px rgba(0,255,0,0.4);
}
.stat-number { font-size: 36px; font-weight: bold; text-align: center; line-height: 1.2; }
.stat-label { font-size: 16px; margin-top: 5px; text-align: center; }

@keyframes pulseCircle {
  0%,100% { transform: scale(1); box-shadow: 0 0 15px rgba(255,255,255,0.2); }
  50% { transform: scale(1.05); box-shadow: 0 0 25px rgba(255,255,255,0.4); }
}
@keyframes pulse {
  0%,100% { transform: scale(1); box-shadow: 0 0 25px rgba(45,159,89,0.4); }
  50% { transform: scale(1.05); box-shadow: 0 0 44px rgba(45,159,89,0.7); }
}
@keyframes softPulse {
  0%,100% { opacity: 1; text-shadow: 0 0 13px rgba(143,227,136,0.4); }
  50% { opacity: 0.85; text-shadow: 0 0 25px rgba(143,227,136,0.7); }
}

/* باقي تنسيق النموذج كما في النسخة الأصلية */
.form-container {
  position: relative;
  max-width: 1062px;
  background: rgba(28,31,35,0.95);
  margin: 50px auto;
  padding: 50px 62px;
  border-radius: 14px;
  box-shadow: 0 3px 12px rgba(0,0,0,0.5);
  overflow: hidden;
}
.form-container::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 625px;
  height: 625px;
  background: url('14CB1AC8-5C20-4ABE-8C85-3DF426A41645.png') no-repeat center;
  background-size: contain;
  opacity: 0.03;
  transform: translate(-50%, -50%);
  pointer-events: none;
}
label { display: block; margin: 18.75px 0 7.5px; color: #8fe388; font-weight: 600; }
input, select {
  width: 100%;
  padding: 12.5px;
  border: 1px solid #333;
  border-radius: 8px;
  background: #262a2f;
  color: #fff;
  font-size: 18.75px;
}
input:focus, select:focus { outline: none; border-color: #2d9f59; }
.two-columns { display: flex; gap: 18.75px; flex-wrap: wrap; }
.two-columns > div { flex: 1; }
.difference-box {
  background: #212428;
  border: 1px solid #2d9f59;
  border-radius: 8px;
  margin-top: 12.5px;
  padding: 15px;
  text-align: center;
  font-weight: bold;
  color: #8fe388;
  opacity: 0;
  transition: opacity 0.6s ease, transform 0.4s ease;
}
.difference-box.show { opacity: 1; transform: translateY(0); }
.note { font-size: 16.25px; color: #aaa; margin-top: 6.25px; text-align: center; display: none; }
button {
  background: #2d9f59;
  border: none;
  padding: 15px 37.5px;
  color: #fff;
  border-radius: 8px;
  font-size: 20px;
  cursor: pointer;
  margin-top: 31px;
  transition: all 0.3s ease;
}
button:hover { background: #36b866; transform: scale(1.03); }
footer { text-align: center; font-size: 16.25px; color: #888; margin-top: 37px; padding: 12.5px; border-top: 1px solid #333; }
.success-message {
  display: none;
  text-align: center;
  color: #8fe388;
  font-size: 22.5px;
  margin-top: 25px;
  background: rgba(33, 36, 40, 0.9);
  padding: 18.75px;
  border-radius: 10px;
  border: 1px solid #2d9f59;
  position: relative;
}
.success-message button {
  position: absolute;
  top: 6px;
  left: 12.5px;
  background: transparent;
  color: #8fe388;
  border: none;
  font-size: 22.5px;
  cursor: pointer;
}
</style>
</head>
<body>

<header>
  <div class="header-flex">
    <div class="stats-circle red-circle" id="diff-circle">
      <div class="stat-number" id="diff-total">7451.00 د.ل</div>
      <div class="stat-label">إجمالي الفروقات</div>
    </div>

    <div class="logo-wrapper">
      <img src="14CB1AC8-5C20-4ABE-8C85-3DF426A41645.png" alt="شعار المركز">
    </div>

    <div class="stats-circle green-circle" id="complaint-circle">
      <div class="stat-number" id="complaint-count">74</div>
      <div class="stat-label">عدد الشكاوى</div>
    </div>
  </div>

  <h2>تجمع خبراء وموظفي مركز الخبرة القضائية والبحوث</h2>
  <h1>نافذة رفع بيانات لغرض الشكوى</h1>
</header>

<section class="form-container">
<form id="complaintForm" onsubmit="return validateForm(event)">
  <div class="two-columns">
    <div>
      <label for="name">الاسم الكامل</label>
      <input type="text" id="name" required placeholder="اكتب اسمك الكامل">
    </div>
    <div>
      <label for="salary-status">حالة المرتب</label>
      <select id="salary-status" required>
        <option value="">اختر الحالة</option>
        <option>مستمر</option>
        <option>موقوف</option>
      </select>
    </div>
  </div>
  <div class="two-columns">
    <div>
      <label for="branch">الفرع</label>
      <select id="branch" required onchange="toggleOtherBranch()">
        <option value="">اختر الفرع</option>
        <option>بنغازي</option>
        <option>طرابلس</option>
        <option>البيضاء</option>
        <option>مصراتة</option>
        <option>سبها</option>
        <option>بن وليد</option>
        <option>أخرى</option>
      </select>
      <input type="text" id="other-branch" style="display:none;margin-top:12.5px;" placeholder="اكتب اسم الفرع">
    </div>
    <div>
      <label for="role">الصفة</label>
      <select id="role" required onchange="toggleExpertField()">
        <option value="">اختر الصفة</option>
        <option>موظف</option>
        <option>خبير قضائي</option>
        <option>مستشار</option>
      </select>
    </div>
  </div>

  <div id="expert-field" style="display:none;">
    <label for="specialty">الاختصاص</label>
    <input type="text" id="specialty" placeholder="اكتب اختصاصك القضائي">
  </div>

  <div class="two-columns">
    <div>
      <label for="last-edit">تاريخ آخر تعديل</label>
      <input type="date" id="last-edit" required>
    </div>
    <div>
      <label for="edit-type">نوع التعديل</label>
      <input type="text" id="edit-type" required placeholder="نوع التعديل">
    </div>
  </div>

  <div class="two-columns">
    <div>
      <label for="salary-before">الراتب قبل الصرف اللحظي</label>
      <input type="number" id="salary-before" required oninput="calculateDifference()">
    </div>
    <div>
      <label for="salary-after">الراتب اللحظي</label>
      <input type="number" id="salary-after" required oninput="calculateDifference()">
    </div>
  </div>

  <div id="difference" class="difference-box">الفرق بعد خصم 1٪ تكافل اجتماعي: —</div>
  <div id="note" class="note">⚠️ استقطاع 1٪ خاص بالتكافل الاجتماعي</div>

  <label for="phone">رقم الهاتف</label>
  <input type="tel" id="phone" required placeholder="رقم واتساب">
  <button type="submit">إرسال البيانات</button>

  <div id="successMessage" class="success-message">
    ✅ تم الإرسال بنجاح<br>سيتم التواصل خلال 24 ساعة.
    <button onclick="closeMessage()">✖</button>
  </div>
</form>
</section>

<footer>هذا الموقع لا يمثل جهة رسمية، بل جهد تطوعي.</footer>

<script>
let totalDifference = parseFloat(localStorage.getItem("totalDifference")) || 7451;
let complaintCount = parseInt(localStorage.getItem("complaintCount")) || 74;

window.addEventListener("load", () => {
  document.getElementById("diff-total").textContent = totalDifference.toFixed(2) + " د.ل";
  document.getElementById("complaint-count").textContent = complaintCount;
  document.getElementById("diff-circle").classList.add("show");
  document.getElementById("complaint-circle").classList.add("show");
});

function toggleExpertField() {
  document.getElementById("expert-field").style.display =
    document.getElementById("role").value === "خبير قضائي" ? "block" : "none";
}
function toggleOtherBranch() {
  document.getElementById("other-branch").style.display =
    document.getElementById("branch").value === "أخرى" ? "block" : "none";
}

function calculateDifference() {
  const before = parseFloat(document.getElementById("salary-before").value) || 0;
  const after = parseFloat(document.getElementById("salary-after").value) || 0;
  const diffBox = document.getElementById("difference");
  const note = document.getElementById("note");

  if (!before || !after) {
    diffBox.textContent = "الفرق بعد خصم 1٪ تكافل اجتماعي: —";
    diffBox.classList.remove("show");
    note.style.display = "none";
    diffBox.dataset.value = 0;
    return;
  }

  const deduction = after * 0.01;
  const diffAfterDeduction = (after - before) - deduction;
  diffBox.dataset.value = diffAfterDeduction;

  const sign = diffAfterDeduction >= 0 ? "+" : "";
  diffBox.textContent = `الفرق بعد خصم 1٪ تكافل اجتماعي: ${sign}${diffAfterDeduction.toFixed(2)} د.ل`;
  diffBox.style.color = diffAfterDeduction >= 0 ? "#8fe388" : "#e74c3c";
  diffBox.classList.add("show");
  note.style.display = "block";
}

function validateForm(event) {
  event.preventDefault();
  const form = document.getElementById("complaintForm");
  const diffValue = parseFloat(document.getElementById("difference").dataset.value) || 0;

  totalDifference += diffValue;
  complaintCount += 1;

  document.getElementById("diff-total").textContent = totalDifference.toFixed(2) + " د.ل";
  document.getElementById("complaint-count").textContent = complaintCount;

  localStorage.setItem("totalDifference", totalDifference);
  localStorage.setItem("complaintCount", complaintCount);

  const msg = document.getElementById("successMessage");
  msg.style.display = "block";
  setTimeout(() => msg.style.display = "none", 10000);

  form.reset();
  document.getElementById("difference").classList.remove("show");
  document.getElementById("note").style.display = "none";
}

function closeMessage() {
  document.getElementById("successMessage").style.display = "none";
}
</script>

</body>
</html>
